__NOTOC__
== Configuring a backend node in the cluster ==

Here we describe how to configure an instance of {{PRODUCT}} to serve as a backend node in a [[Help:Scaleout | high-availability cluster]] setup. 

=== 1) Configuration of the local triple store ===

The first step involves configuration of the triple-store repository which will be used by the {{PRODUCT}} instance. This is performed using a standard procedure: see the [[Help:RepositoryConfiguration | repository configuration help section]] or the dedicated [[Help:EnterpriseDB|setup page for the fluidOps Enterprise DB repository]].

=== 2) Defining the {{PRODUCT}} instance as a cluster node ===

In order to enable the current {{PRODUCT}} instance to serve as a cluster node, the following properties have to be set:
<source>
# Enable start-up as cluster node. 
# The value must be "true".
scaleOutCluster=true
# Cluster seed node IPs
clusterNodes=clusternode1\:47500..47529,clusternode2\:47500..47529
# Location of the cluster quorum and REDO log. 
# This has to be a shared directory accessible by all nodes. 
clusterRedoLocation=/path/to/directory/redos
# Backend access credentials (to allow communication among the cluster nodes)
ecmUserName=admin
ecmPasswordEnc=...
</source>

You can use the configuration dialog below to configure these settings at runtime (* ''only visible when logged in with respective permissions'').

{{#widget: com.fluidops.iwb.widget.admin.InlineConfigurationWidget | 
 configOptions = {{ 'scaleOutCluster' | 'clusterNodes' | 'clusterRedoLocation' | 'ecmUserName' | 'ecmPasswordEnc' }}
}}

In a special case, where several nodes have to run on the same host, 
it is necessary to configure manually the ports which will be used by each node
to serve HTTPS, HTTP, and RMI requests respectively

<source>
# HTTPS port to which the current node will be listening
httpSslPort=50443
# HTTP port to which the current node will be listening
httpPort=50080
# Port to access the node using Remote Method Invocation (RMI). 
# This protocol will be used by the cluster clients
backendServicePort=60501
</source>

You can use the configuration dialog below to configure these settings at runtime (* ''only visible when logged in with respective permissions'').

{{#widget: com.fluidops.iwb.widget.admin.InlineConfigurationWidget | 
 configOptions = {{ 'httpSslPort' | 'httpPort' | 'backendServicePort' }}
}}
