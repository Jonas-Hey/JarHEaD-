== R2RML Mappings ==
In the [[Help:DataOps | three-step data integration process]] R2RML mappings are used to transform any kind of tabular data into RDF, using a [[Help:TableDataSources | tabular data source]].

=== Mapping Syntax ===

While the standardized <a href="http://www.w3.org/TR/r2rml/" target="_blank">R2RML mapping language</a> is used under the hood, we offer a visual mapping editor to create and manipulate rich R2RML mappings.
If you prefer to instead write the mappings in plain R2RML, please use any external editor of your choice to do so.
You can later import your mappings in the R2RML editor.

=== R2RML Mapping Editor ===

Our R2RML mapping editor allows you to visually create, modify, import and export R2RML ''mapping collections'' that specify how to transform tabular data into RDF.

Mapping collections are used with [[Help:TableDataSources | tabular data sources]].
You can reach the R2RML editor by browsing to any tabular data source that you have previously created (go to [[Admin:DataSources | Settings/Data Sources]] to do so).

If a mapping collection is already used with this data source, you will see it listed at the bottom of the page and can simply click on the link to get to its overview page.
Otherwise, no mapping collection exists for this data source, yet.
In that case, click "Create New Provider", and proceed to "Open Mapping Editor" in the dialog that will pop up.

==== Mapping Collection Overview ====
Your entry point to the mapping editor is the ''mapping collection overview''.
Here you can add or edit mapping rules and also import/export a mapping collection.

<img src="../images/help/DataOps/mapping_collection.png" style="max-width:800px" />

To add an individual rule, just enter a new name in the box at the top and press "Create".
Alternatively, you may click on the "+" icon next to one of the tables at the bottom of the page.
This creates a mapping rule specifically for the selected table.

==== Create Mapping Rules ====
Your mapping collection is split over any number of mapping rules.
Each mapping rule maps some part of the data.
Typically, you would have one mapping rule for each ''type'' of instances, e.g., one rule for persons, one for organizations, one for departments, etc.
Creating a mapping rule starts by choosing the source data that should be used by the mapping rule.
This can be a table or view from the database:

<img src="../images/help/DataOps/create_r2rml_rule_1.png" style="max-width:800px" />

Alternatively, you may specify a SQL query that combines and connects arbitrary data from your database:

<img src="../images/help/DataOps/create_r2rml_rule_2.png" style="max-width:800px" />

Refer [[Help:R2RMLEditor_SQLExamples | here]] for additional SQL Examples

==== Edit Mapping Rules: Create Instance Data ====
Editing a mapping rule is easy.
First, you would usually want to specify the type of instances that the rule would create (e.g., persons).

<img src="../images/help/DataOps/edit_r2rml_2.png" style="max-width:800px" />

The mapping rule page allows the user to see and modify how the objects (values in imported columns) are mapped to the subject (instances of the some class), one per row, upon being imported.

Assign a type to the instances created by this rule (e.g., persons).
A dropdown will suggest types from your ontology as you type.

==== Edit Mapping Rules: Add Attribute Data (Datatype Properties) ====
Add or edit predicate/object maps below to map attributes from the table to datatype properties.
In the resulting RDF you will get a triple with that attribute for each of instances generated.

<img src="../images/help/DataOps/edit_r2rml_1.png" style="max-width:800px" />

==== Edit Mapping Rules: Interlink Instance Data (Object Properties) ====
It is also possible to link to instances created by other mapping rules.
In the resulting RDF, this generates object properties linking those instances.

<img src="../images/help/DataOps/edit_r2rml_3.png" style="max-width:800px" />

==== Using Mappings: Loading Data into the System ====
You can always use the preview on the bottom of the page to get a few sample triples and verify your progress.
Eventually, however, you will probably like to materialize the results of your mapping in the {{PRODUCT}}.

This happens as part of the [[Help:DataOps | three-steps data integration process]].
In this process, a [[Help:DataSources | data source]] is used together with your mappings.

As your mappings are already linked to a data source, you can simply browse to the data source that uses your mappings (you can find a list of data sources at [[Admin:DataSources | Settings/Data Sources]].
At the bottom of the page you will find a list of associated mapping collections.
There, click the "+" icon next to your mapping collection to add a [[Help:Providers | data provider]] for it that updates the data from the data source on a regular basis using your mappings.
See [[Help:DataSources | data sources]] for more details.

=== R2RML Engine ===

As a default R2RML engine the platform uses <a href="http://www.antidot.net/en/ecosystem/db2triples/" target="_blank">DB2Triples</a>. However, the platform can be configured to use a different engine of your choice. 
This can be done on the provider level as part of the [[Help:DataSources|R2RML Provider]] configuration or by changing the global 
[[Help:SystemConfiguration|system default]].