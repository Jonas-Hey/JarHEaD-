== Using the Semantic Wiki ==

The Semantic Wiki enriches classical wiki functionality with novel features for semantic contexts, and allows to visualize information using standard [http://www.mediawiki.org/wiki/Help:Formatting Mediawiki markup syntax]. Besides textual content, it provides means for embedding interactive UI components - the [[Help:Widgets| widgets]] in a fully declarative way. Particularly noteworthy is the template engine, which automatically instantiates available template pages for resources (if defined). 

In the following, we shortly describe the main features of the Semantic Wiki, including both classical Wiki features as well as the semantic add-ons. Please note that this document is not intended to provide a full reference to wiki features, but rather explains the syntax and features by example.

=== Semantic Wiki Overview ===

The semantic wiki is a UI component for visualizing and editing wiki content (i.e., textual information and widgets). Depending on the [[Help:UserManagement| access level configuration]] it provides functionality for ''viewing'', ''editing'' and ''revision browsing'': A user, who does not have edit rights, can only ''view'' the wiki page, while a user with full rights will have access to the ''edit'' and ''revision browsing'' facilities.

The particular modes can be accessed directly, using the HTTP request parameter ''action'' with one of the values ''view'', ''edit'' or ''revisions'', as illustrated in the following example:

<source>
Help:Wiki?action=edit
</source>

With the edit icon <img src="../images/ui/wiki_edit.png" /> on the top right of any wiki page it is possible to switch between ''view'' and ''edit'' mode. ''Revisions'' can be accessed via the info icon <img src="../images/ui/pageinfo.png" />.


The particular modes are explained in more detail below.

=== Wiki Markup Language ===
The basic idea of the wiki language is to provide an easy-to-learn textual markup language that can be used to collaboratively create formatted and structured text. Any wiki page is created by creating content in a wiki editor - either as markup text or using the graphical wiki editor. It is then automatically translated by the system according to the markup language semantics, and finally displayed as formatted HTML in the ''Wiki view''. The following markup


<pre>
'''Wiki Syntax by Example'''

''Bulleted List:''
* Topic A
** Subtopic of A
** Subtopic of A
* Topic B
** Subtopic of B

''Numbered List:''
# Topic A
## Subtopic of A
## Subtopic of A
# Topic B
## Subtopic of B
</pre>

generates the following output:

'''Wiki Syntax by Example'''

''Bulleted List:''
* Topic A
** Subtopic of A
** Subtopic of A
* Topic B
** Subtopic of B

''Numbered List:''
# Topic A
## Subtopic of A
## Subtopic of A
# Topic B
## Subtopic of B
<br/><br/>

As can be seen, there are different syntactic markup constructs, e.g. to create

* '''Headings''': Headings can be created by enclosing the headline into '=' signs. Smaller headings are generated by increasing the number of enclosing equality signs.
* '''Bold text''': Bold text can be created by enclosing it into triple back-ticks (cf. the example above).
* '''Italic text''': Italic text can be created by enclosing it into double back-ticks (cf. the example above).
* '''Bullet Lists''': Writing bullet lists is very intuitive: the special symbol '*' is interpreted as a bullet. When using '**'' in a line subsequent to an existing bullet, it will be automatically interpreted as a sub-bullet of the previous one.
* '''Numbered Lists''': Similarly to bullet lists, the symbol '#' can be used in place of the '*' symbol to create numbered lists.

Again, the listing above describes only a small fraction of the wiki markup language and serves as an example demonstrating the basic wiki concept only.

'''Important Note:''' ''When editing a wikipage it is best to have only one instance of the {{PRODUCT}} open within the browser.  Problems while editing can be encountered if the {{PRODUCT}} is open in more than one tab of the '''same''' browser'' due to session handling of the browser.

==== Links ====
A central feature has considerably contributed to the success of wikis is the possibility to interlink information. 

Syntactically, links are created by enclosing the name of the page we want to link to into squared brackets. If, for instance, we want to link to the page of the documentation, we may use the wiki Edit view and enter some text like

<pre>More information can be found at the [[Help:Help]] page.</pre>

This text is then translated into the following HTML code: ''More information can be found at the [[Help:Help]] page.''

It is also possible to change the text that is displayed, by separating it with a ''|'' symbol:

<pre>More information can be found at the [[Help:Help|{{PRODUCT}} Help Page]].</pre>

The latter variant of the link yields the following HTML code (which links to exactly the same location as in the previous example): ''More information can be found at the [[Help:Help|{{PRODUCT}} Help Page]].''

A comprehensive description of other link types (like page-internal or wiki-external links) is beyond the scope of this manual, but can be found on the Media Wiki links help page at [http://www.mediawiki.org/wiki/Help:Links].


=== Graphical Wiki Editor ===

{{PRODUCT}} offers a graphical wiki editor that allows to compose custom dashboards or reports in an intuitive manner. The user can select from a rich set of available wiki fragments and arrange these in block-based layouts using drag & drop.

The graphical wiki editor can be accessed on fresh (i.e., empty wiki pages) by switching to the ''layout editor''. Note that for syntactical reasons the layout editor is only available for pages that are purely created with the layout editor, i.e., a page that has been manually modified using markup language cannot be opened in the graphical editor.


Supported features:

* block based layout with multiple columns per block
* selection of ''includes'' from a rich set of available ''wiki page fragments''
* clean organization by using titles per block
* optionally ''named parameters'' and ''CSS classes'' can be provided
* optionally a block can be configured to be ''collapsible''

The following figure illustrates the graphical editor using the template of a VM page.

<img src="../images/help/wiki-layoutEditor-VM.png" />


=== Wiki Page Metadata ===

Any wiki page can be annotated with metadata including

* a label
* a description
* the page type (wiki page fragment, report, ...)

This information is stored in the ''config'' repository and used by different components, e.g., the [[Help:Reporting| reporting functionality]] or the graphical wiki editor.

Wiki page metadata can be provided by opening the UI dialog in the edit view of with the ''Edit Metadata'' button.

=== Other Wiki Features ===

==== Revision Management ====
The Wiki automatically stores previous versions and provides a simple yet effective revision management system. When clicking on the info icon <img src="../images/ui/pageinfo.png" /> and then on ''Revisions'', a survey over all previous revisions is shown, including information about the persons that created the revision, the date when the revisions were created, as well as the size of the revision (number of characters of the wiki page). The comment column displays additional user comments that may be entered when saving a revision, which may be useful to distinguish previous version.

<img src="../images/help/revisions.png" />

Using the revision management system, it is also possible to compare two revisions. To do so, select the two revisions that you want to compare from the revision list (by clicking the two select boxes in front of the revisions) and press the '''Show Difference''' button. The two versions of the wiki page will be displayed side by side below the revision table. One can restore an old version by clicking the '''Restore Revision''' button at the corresponding revision row. The link icon at every revision row shows the corresponding revision in wiki view. 

There are two options for deleting the page revisions. You can either select the revisions you want to delete and press the '''Delete selected revisions''' button or you can delete revisions older than a certain date by clicking the '''Delete revisions by date''' button. The button will trigger a pop-up window that will allow you picking a date and defining if the bootstrap revisions should also be deleted or not.

To manage all wiki pages and their revisions use [[Help:WikiManagement | Wiki Management]].

==== Wiki Template Pages ====
Another useful feature is the possibility to create template pages that are automatically instantiated for resources of some fixed type. In the following we describe how to create a template page with an example.We will create a template for a the type ''Employee'', representing an employee. For our example the wiki page employees should display name, hours contracted, and salary, assuming that resources of type Employee have corresponding attributes associated.

1. The first step is to create the template page. Templates in the {{PRODUCT}} are prefixed by "Template:", i.e. templates reside in the special ''Template'' namespace. To create the template resource for employees just navigate to the corresponding page, e.g. in a local system ''<nowiki>http://localhost:8888/resource/Template:Employee</nowiki>''.

2. Switch to the wiki edit mode, where the content of the template can be entered. As described in the section about [[Help:AdvancedWikiSyntax| advanced wiki syntax]] you can use special constructs to access data from the underlying RDF database.

A template for employee, displaying ''name'', ''contract hours'' and ''salary'' could for instance look as follows:

<source>
'''{{#show: {{this}} | foaf:name}}'''

Contracted hours: {{#show: {{this}} | contract}}
Salary: {{#show: {{this}} | salary}}
</source>

3. This template will be instantiated automatically when entering the page of a new resource of type Employee.

Note that changes made on the template page are propagated to individual resources, as long as the user has not modified the wiki page of the resource, more particularly, as long as the include of the template stays in the wiki page of the instance. 

==== Automated Content Retrieval ====
The Automated Content Retrieval allows an installation of {{PRODUCT}} to automatically retrieve wikimedia content for dbpedia entities. This feature is also known as wikibot and can be enabled by executing the following instructions:

* Add a new name space prefix (e.g. dbpedia_resource) in [[Admin:Namespaces]] which points to the name space ''<nowiki>http://dbpedia.org/resource/</nowiki>''.
* Enable the wikibot mechanism by uncommenting the line <tt># http\://dbpedia.org/resource/=http\://en.wikipedia.org/w/</tt> in the <tt>config/wikibot.prop</tt> configuration file. If the file does not exist, create it and add the line: <tt>http\://dbpedia.org/resource/=http\://en.wikipedia.org/w/</tt>.

To test this feature, go to a wikipage of a DBpedia entity. For example, open <tt>[serveraddress]/resource/[name_space_prefix]:Usain_Bolt</tt>. Substitute <tt>[name_space_prefix]</tt> with the name space prefix you defined previously. The current content of Usain Bolt's wikipedia article will be retrieved, displayed and stored in the {{PRODUCT}}.


The wikibot mechanism can connect to any MediaWiki installation. The default settings support the retrieval of wikipedia pages for dbpedia entities. To change this or to add a MediaWiki for other entities, the wikibot configuration file <tt>fiwb/config/wikibot.prop</tt> has to be adapted. This file contains mappings from RDF-namespaces to accessible MediaWiki servers. Upon opening the wikipage of a mapped entity, wikimedia content is tried to be retrieved from the corresponding MediaWiki server.

==== Embedding Images ====

===== Media Wiki Syntax =====
If you want to embed custom images into your pages you can use the general  [http://www.mediawiki.org/wiki/Help:Images media wiki syntax]. This would be probably the best way to display images that you have uploaded using the [[Help:Upload | File Upload UI]]. E.g. if the name of your uploaded image is ''picture.png'' you can embed this file as an image (you can use the image symbol from the editor menu for assistance) like this:
<source>
[[File:picture.png]]
</source>

===== Value Resolvers in Template Pages =====
You can also use a [[Help:ValueResolvers | value resolver]] for displaying images on a wiki page. This is especially useful for wiki template pages. For example, if the current resource has an image URL attached with a property '''foaf:img''' the image will be displayed after saving the page with a piece of code like this: 
<source>
{{#show: {{this}} | foaf:img | valueResolver=IMAGE}}
</source>
You can find more information about value resolvers [[Help:ValueResolvers | here]].

==== Using the #REDIRECT directive ====

The #REDIRECT directive can be used to redirect the reader's browser automatically to a specified target page. A redirect is created by the text

<source>
#REDIRECT [[name of the target page]]

Example:
#REDIRECT [[Help:Start]]
</source>

Once embedded into a wiki page (or within an included template) the redirect is performed automatically. See [http://meta.wikimedia.org/wiki/Help:Redirect here] for details.

Note that in order to edit a page containing the directive, the HTTP request parameter ''redirect=no'' (or alternatively: ''action=edit'') can be  used.
